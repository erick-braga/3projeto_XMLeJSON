<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estilos/style.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Manipulação de JSON e XML</title>
</head>


<body>
    <footer style="padding: 20px; 
    width: 100%;
    background-color: rgb(88, 134, 173);
    color: white;
    text-align: center;
    ">
        Feito com &#x2764 por Erick Henrique Braga Mota e André Farinelli Gonzales
    </footer>
    <div class="container">

        <div id="container2">
            <main>
                <h1>Manipulação de JSON e XML</h1><br>
                <form id="formDados">
                    <div>
                        <label for="Id">Id:</label><br>
                        <input type="int" id="Id" name="Id" required>
                    </div>
                    <div>
                        <label for="Titulo">Titulo:</label><br>
                        <input type="text" id="Titulo" name="Titulo" required>
                    </div>
                    <div>
                        <label for="Editora">Editora:</label><br>
                        <input type="text" id="Editora" name="Editora" required>
                    </div>
                    <div>
                        <label for="Autor">Autor:</label><br>
                        <input type="text" id="Autor" name="Autor" required>
                    </div>
                    <div>
                        <label for="Idioma">Idioma:</label><br>
                        <input type="text" id="Idioma" name="Idioma" required>
                    </div>
                    <div>
                        <label for="Genero">Gênero:</label><br>
                        <select id="Genero" name="Genero" required>
                            <option value="" disabled selected>Gênero</option>
                            <option value="Romance">Romance</option>
                            <option value="Conto">Conto</option>
                            <option value="Crônica">Crônica</option>
                            <option value="Poesia">Poesia</option>
                            <option value="Fábula">Fábula</option>
                            <option value="Drama">Drama</option>
                            <option value="Comédia">Comédia</option>
                            <option value="Tragédia">Tragédia</option>
                            <option value="Auto">Auto</option>
                            <option value="Ensaios">Ensaios</option>
                            <option value="Literatura Infantil">Literatura Infantil</option>
                            <option value="Literatura Juvenil">Literatura Juvenil</option>
                            <option value="Biografia">Biografia</option>
                            <option value="Autobiografia">Autobiografia</option>
                            <option value="Memórias">Memórias</option>
                            <option value="Epistolar">Epistolar</option>
                            <option value="Fantasia">Fantasia</option>
                            <option value="Ficção Científica">Ficção Científica</option>
                            <option value="Terror">Terror</option>
                            <option value="Suspense">Suspense</option>
                            <option value="Mistério">Mistério</option>
                            <option value="Aventura">Aventura</option>
                            <option value="Histórico">Histórico</option>
                            <option value="Policial">Policial</option>
                            <option value="Psicológico">Psicológico</option>
                            <option value="Erótico">Erótico</option>
                            <option value="Didático">Didático</option>
                            <option value="Religioso">Religioso</option>
                            <option value="Espiritualista">Espiritualista</option>
                            <option value="Autoajuda">Autoajuda</option>
                            <option value="Humor">Humor</option>
                            <option value="Satírico">Satírico</option>
                            <option value="Lírico">Lírico</option>
                            <option value="Épico">Épico</option>
                            <option value="Narrativo">Narrativo</option>
                            <option value="Dramático">Dramático</option>
                            <option value="Gótico">Gótico</option>
                            <option value="Distopia">Distopia</option>
                            <option value="Utopia">Utopia</option>
                            <option value="Realismo Mágico">Realismo Mágico</option>
                            <option value="Regionalista">Regionalista</option>
                            <option value="Naturalismo">Naturalismo</option>
                            <option value="Romantismo">Romantismo</option>
                            <option value="Modernismo">Modernismo</option>
                            <option value="Pós-modernismo">Pós-modernismo</option>
                            <option value="Realismo">Realismo</option>
                            <option value="Simbolismo">Simbolismo</option>
                            <option value="Expressionismo">Expressionismo</option>
                            <option value="Existencialismo">Existencialismo</option>
                            <option value="Surrealismo">Surrealismo</option>
                        </select>
                    </div>
                    <div>
                        <label for="Imagem">Imagem:</label><br>
                        <input type="text" id="Autor" name="Imagem" required>
                    </div>
                    <div>
                        <label for="Formato">Formato:</label><br>
                        <select type="text" id="Autor" name="Formato" required>
                            <option value="" disabled selected>Formato</option>
                            <option value="Romance">Fisico</option>
                            <option value="Conto">digital</option>
                        </select>
                    </div>
                    <div>
                        <label for="Valor">Valor:</label><br>
                        <input type="number" id="Valor" name="Valor" required>
                    </div>
                    <div>
                        <label for="Ano_P">Ano de Publicação:</label><br>
                        <input type="date" id="Ano_P" name="Ano_P" required>
                    </div>
                    <div>
                        <label for="Estado">Estado:</label><br>
                        <select type="text" id="Estado" name="Estado" required>
                            <option value="" disabled selected>Estado</option>
                            <option value="Novo">Novo</option>
                            <option value="Usado">Usado</option>
                        </select>
                    </div>
                        <button type="submit">Adicionar Dados</button>
                </form>
            </main>
            <div class="format-buttons">
                <button id="mostrarDadosJSON">Mostrar Dados (JSON)</button>
                <button id="mostrarDadosXML">Mostrar Dados (XML)</button>
                <button id="exportarJSON">Exportar JSON</button>
                <button id="exportarXML">Exportar XML</button>
                <button id="limparDados">Limpar Dados</button>
            </div>
        </div>

        <div id="resultado-pre">
            <h1 style="text-align: center;">Visualização dos dados de JSON e XML </h1>
            <br>
            <hr style="width: 600px; margin: auto;"><br>
            <pre id="resultado"></pre>
        </div>
    </div>




    <script>

        localStorage.clear();


        function adicionarDados(event) {
            event.preventDefault();


            const Id = document.getElementById('Id').value;
            const Titulo = document.getElementById('Titulo').value;
            const Editora = document.getElementById('Editora').value;
            const Autor = document.getElementById('Autor').value;
            const Genero = document.getElementById('Genero').value;
            const Imagem = document.getElementById('Imagem').value;
            const Formato = document.getElementById('Formato').value;
            const Valor = document.getElementById('Valor').value;
            const Ano = document.getElementById('Ano_P').value;
            const Estado = document.getElementById('Estado').value;

            const novosDados = {
                
                Autor: Autor,
                Genero: Genero
                Imagem: imagem,
                Formato: Formato,
                Valor: parseFloat(Valor),
                Ano: parseDate(Ano),
                Estado: Estado
            };

            const dadosExistentes = JSON.parse(localStorage.getItem('dadosJSON')) || [];

            dadosExistentes.push(novosDados);

            localStorage.setItem('dadosJSON', JSON.stringify(dadosExistentes));


            document.getElementById('formDados').reset();

            alert('Dados adicionados com sucesso!');
        }

        function mostrarDadosJSON() {

            const dados = localStorage.getItem('dadosJSON');
            const resultado = document.getElementById('resultado');

            resultado.textContent = dados ? JSON.stringify(JSON.parse(dados), null, 2) : 'Nenhum dado encontrado.';
        }


        function jsonParaXml(json) {
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n<dados>\n';

            JSON.parse(json).forEach(item => {
                xml += '  <registro>\n';
                xml += `    <nome>${item.nome}</nome>\n`;
                xml += `    <idade>${item.idade}</idade>\n`;
                xml += `    <cidade>${item.cidade}</cidade>\n`;
                xml += '  </registro>\n';
            });

            xml += '</dados>';
            return xml;
        }

        function mostrarDadosXML() {
            const dados = localStorage.getItem('dadosJSON');
            const resultado = document.getElementById('resultado');

            if (dados) {
                resultado.textContent = jsonParaXml(dados);
            } else {
                resultado.textContent = 'Nenhum dado encontrado.';
            }
        }

        function exportarJSON() {
            const dados = localStorage.getItem('dadosJSON');

            if (!dados) {
                alert('Nenhum dado encontrado para exportar.');
                return;
            }

            const blob = new Blob([dados], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'dados.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function exportarXML() {
            const dados = localStorage.getItem('dadosJSON');

            if (!dados) {
                alert('Nenhum dado encontrado para exportar.');
                return;
            }

            const xml = jsonParaXml(dados);
            const blob = new Blob([xml], { type: 'application/xml' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'dados.xml';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }


        function limparDados() {
            if (confirm('Tem certeza que deseja limpar todos os dados?')) {
                localStorage.removeItem('dadosJSON');
                document.getElementById('resultado').textContent = 'Dados limpos com sucesso.';
            }
        }

        document.getElementById('formDados').addEventListener('submit', adicionarDados);
        document.getElementById('mostrarDadosJSON').addEventListener('click', mostrarDadosJSON);
        document.getElementById('mostrarDadosXML').addEventListener('click', mostrarDadosXML);
        document.getElementById('exportarJSON').addEventListener('click', exportarJSON);
        document.getElementById('exportarXML').addEventListener('click', exportarXML);
        document.getElementById('limparDados').addEventListener('click', limparDados);
    </script>
</body>

</html>